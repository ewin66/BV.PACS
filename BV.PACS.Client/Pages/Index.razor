@page "/"
@using BV.PACS.Client.Pages.Sources
@using BV.PACS.Client.Services
@inject StateService _stateService;


<TopMenu
    OnMenuClick="@StateHasChanged">

</TopMenu>

<div class="content px-4">


    @{
        var state = _stateService.CurrentPageState;

        switch (state?.PageName)
        {
            case nameof(SourceCatalog):
                <SourceCatalog OnOpenTrackingForm=@DoOpenNewPage>
                </SourceCatalog>
                break;

            case nameof(SourceTracking):
                <SourceTracking Id=@state.Context OnClose=@DoClosePage>
                </SourceTracking>
                break;

            default:
                <StartForm></StartForm>
                break;
        }
    }

</div>

@functions
{

    public void DoOpenNewPage(string pageName, int context)
    {
        _stateService.OpenNewPage(pageName, context);
        StateHasChanged();
    }
    public void DoClosePage(DialogResult result)
    {
        _stateService.ClosePage( result);
        StateHasChanged();
    }
}