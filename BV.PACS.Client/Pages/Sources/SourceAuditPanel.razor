@using BV.PACS.Shared.Models
@inherits BV.PACS.Client.Shared.Base.AuditPanel<BV.PACS.Shared.Models.SourceAuditGridDto>

@{
    if (GroupedSource == null)
    {
        <div class="row">Loading...</div>
    }
    else
    {
        <div class="row">
            <div class="col-sm-12">
                <DxFormLayout CaptionPosition="@CaptionPosition.Vertical">
                    @{
                        foreach (var group in GroupedSource)
                        {
                            <DxFormLayoutItem ColSpanLg="12" ColSpanMd="12">

                                <Template Context="GridContext">
                                    <div class="card-header">
                                        <button type="button" class="btn btn-link" onclick=@{()=>OnClick(group.Key)}>@group.Key</button>
                                    </div>
                                    @if (GroupedSource[group.Key].GroupVisibility)
                                    {
                                        <DxDataGrid Data=@GroupedSource[group.Key].Data
                                                    ShowFilterRow="@false"
                                                    ShowPager="@false"
                                                    AllowRowSelection="@false"
                                                    PageSize="@BaseSettings.MaxSize">


                                            <DxDataGridColumn Field="@nameof(SourceAuditGridDto.ColumnName)"></DxDataGridColumn>
                                            <DxDataGridColumn Field="@nameof(SourceAuditGridDto.OldValue)"></DxDataGridColumn>
                                            <DxDataGridColumn Field="@nameof(SourceAuditGridDto.NewValue)"></DxDataGridColumn>
                                            <DxDataGridColumn Field="@nameof(SourceAuditGridDto.Object)"></DxDataGridColumn>

                                        </DxDataGrid>
                                    }


                                </Template>
                            </DxFormLayoutItem>
                        }
                    }
                </DxFormLayout>

            </div>
        </div>
    }
}


@functions {


}